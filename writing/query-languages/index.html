<!DOCTYPE html>
<html><head>
	<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Frank Chen</title>
	<meta name="description" content="PM @ Microsoft" />
	<meta name="keywords" content="" />
	<meta name="author" content="kfrankc" />

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <link rel="stylesheet" type="text/css" href="/css/main.css?v=1.3.2" />
	<link rel="stylesheet" type="text/css" href="/css/component.css?v=0.0.9" />

	<link rel="preconnect" href="https://fonts.gstatic.com">
	<link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;700&display=swap" rel="stylesheet">

	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

	<script src="/js/debouncedresize.js"></script>
	<script src="/js/modernizr.custom.js"></script>
	<script src="/js/lazysizes.min.js" async=""></script>
	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
	<meta name="msapplication-TileColor" content="#2b5797">
	<meta name="theme-color" content="#ffffff">
	<meta property="og:title" content="Relational algebra &amp; SQL" />
<meta property="og:description" content="Query languages (computer languages used to make queries in databases) are abundant in style and usage today. In 2018, Microsoft released Azure Data Explorer to GA, introducing another query language that is specifically optimized for semi-structured, unstructured, and time-series data. Even though we have many querying language options, they are all grounded in a field of mathematics called relational algebra.
Relational Algebra is an algebra where operands are defined as relations, or variables that represent relations." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://kfrankc.com/writing/query-languages/" />
<meta property="og:image" content="https://kfrankc.com"/>
<meta property="article:published_time" content="2019-02-09T00:00:00+00:00" />
<meta property="article:modified_time" content="2019-02-09T00:00:00+00:00" /><meta property="og:site_name" content="Frank Chen" />

	
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-128201385-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

	<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://kfrankc.com"/>

<meta name="twitter:title" content="Relational algebra &amp; SQL"/>
<meta name="twitter:description" content="Query languages (computer languages used to make queries in databases) are abundant in style and usage today. In 2018, Microsoft released Azure Data Explorer to GA, introducing another query language that is specifically optimized for semi-structured, unstructured, and time-series data. Even though we have many querying language options, they are all grounded in a field of mathematics called relational algebra.
Relational Algebra is an algebra where operands are defined as relations, or variables that represent relations."/>

</head>
    <body>
      
    

<section class="section pt-5">
  <div class="container">
    <div class="row">
      <div class="col-xs-12 col-sm-12 col-md-8 mx-auto">
        <h4 style="text-align:center"><a href="/">Frank Chen</a></h4>
        <h6 style="text-align:center">
          <a href="https://www.linkedin.com/in/kfrankc" title="linkedin"><span class="inline-svg" ><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
</span></a>&nbsp;
          <a href="https://github.com/kfrankc" title="github"><span class="inline-svg" ><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!-- Font Awesome Free 5.15.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span></a>&nbsp;
          <a href="https://keybase.io/kfrankc" title="keybase"><span class="inline-svg" ><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M286.17 419a18 18 0 1 0 18 18 18 18 0 0 0-18-18zm111.92-147.6c-9.5-14.62-39.37-52.45-87.26-73.71q-9.1-4.06-18.38-7.27a78.43 78.43 0 0 0-47.88-104.13c-12.41-4.1-23.33-6-32.41-5.77-.6-2-1.89-11 9.4-35L198.66 32l-5.48 7.56c-8.69 12.06-16.92 23.55-24.34 34.89a51 51 0 0 0-8.29-1.25c-41.53-2.45-39-2.33-41.06-2.33-50.61 0-50.75 52.12-50.75 45.88l-2.36 36.68c-1.61 27 19.75 50.21 47.63 51.85l8.93.54a214 214 0 0 0-46.29 35.54C14 304.66 14 374 14 429.77v33.64l23.32-29.8a148.6 148.6 0 0 0 14.56 37.56c5.78 10.13 14.87 9.45 19.64 7.33 4.21-1.87 10-6.92 3.75-20.11a178.29 178.29 0 0 1-15.76-53.13l46.82-59.83-24.66 74.11c58.23-42.4 157.38-61.76 236.25-38.59 34.2 10.05 67.45.69 84.74-23.84.72-1 1.2-2.16 1.85-3.22a156.09 156.09 0 0 1 2.8 28.43c0 23.3-3.69 52.93-14.88 81.64-2.52 6.46 1.76 14.5 8.6 15.74 7.42 1.57 15.33-3.1 18.37-11.15C429 443 434 414 434 382.32c0-38.58-13-77.46-35.91-110.92zM142.37 128.58l-15.7-.93-1.39 21.79 13.13.78a93 93 0 0 0 .32 19.57l-22.38-1.34a12.28 12.28 0 0 1-11.76-12.79L107 119c1-12.17 13.87-11.27 13.26-11.32l29.11 1.73a144.35 144.35 0 0 0-7 19.17zm148.42 172.18a10.51 10.51 0 0 1-14.35-1.39l-9.68-11.49-34.42 27a8.09 8.09 0 0 1-11.13-1.08l-15.78-18.64a7.38 7.38 0 0 1 1.34-10.34l34.57-27.18-14.14-16.74-17.09 13.45a7.75 7.75 0 0 1-10.59-1s-3.72-4.42-3.8-4.53a7.38 7.38 0 0 1 1.37-10.34L214 225.19s-18.51-22-18.6-22.14a9.56 9.56 0 0 1 1.74-13.42 10.38 10.38 0 0 1 14.3 1.37l81.09 96.32a9.58 9.58 0 0 1-1.74 13.44zM187.44 419a18 18 0 1 0 18 18 18 18 0 0 0-18-18z"/></svg>
</span></a>&nbsp;
          <a href="/drawings" title="drawings"><span class="inline-svg" ><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"/></svg>
</span></a>
        </h6>
      </div>
    </div>
  </div>
</section>
<div id="content">

  <script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        TeX: {
        equationNumbers: {
          autoNumber: "AMS"
        }
      },
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'] ],
        processEscapes: true
      }
    });
</script>


  <section class="section">
    <div class="container">
      <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-8 mx-auto">
          <h3 class="font-tertiary mt-4 mb-2">Relational algebra &amp; SQL</h3>
          <p class="font-secondary"><span class="author" class="text-primary">Feb 2019</span></p>
          <div class="content">
            <p><a href="https://github.com/AnanthaRajuCprojects/List-of-programming-language-lists/blob/master/Query%20language.md">Query languages</a> (computer languages used to make queries in databases) are abundant in style and usage today. In 2018, Microsoft released <a href="https://azure.microsoft.com/en-us/services/data-explorer/">Azure Data Explorer</a> to GA, introducing another query language that is specifically optimized for semi-structured, unstructured, and time-series data. Even though we have many querying language options,  they are all grounded in a field of mathematics called <em>relational algebra</em>.</p>
<p>Relational Algebra is an algebra where operands are defined as relations, or variables that represent relations. This is why relational algebra provides the basis for a query language in relational databases.</p>
<p><strong>Union $\cup$</strong></p>
<p>Given relations $R$ and $S$, $R \cup S = \{T | T \in R \vee T \in S\}$. In SQL, this is written as</p>
<div class="highlight"><pre style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#2c5dcd;font-weight:bold">SELECT</span> column1 [, column2 ]
<span style="color:#2c5dcd;font-weight:bold">FROM</span> table1 [, table2 ]
[<span style="color:#2c5dcd;font-weight:bold">WHERE</span> condition]

<span style="color:#2c5dcd;font-weight:bold">UNION</span>

<span style="color:#2c5dcd;font-weight:bold">SELECT</span> column1 [, column2 ]
<span style="color:#2c5dcd;font-weight:bold">FROM</span> table1 [, table2 ]
[<span style="color:#2c5dcd;font-weight:bold">WHERE</span> condition]
</code></pre></div><p><strong>Intersection $\cap$</strong></p>
<p>Given relations $R$ and $S$, $R \cap S = \{T | T \in R \wedge T \in S\}$. In SQL, this is written as</p>
<div class="highlight"><pre style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#2c5dcd;font-weight:bold">SELECT</span> column1 [, column2 ]
<span style="color:#2c5dcd;font-weight:bold">FROM</span> table1 [, table2 ]
[<span style="color:#2c5dcd;font-weight:bold">WHERE</span> condition]

<span style="color:#2c5dcd;font-weight:bold">INTERSECT</span>

<span style="color:#2c5dcd;font-weight:bold">SELECT</span> column1 [, column2 ]
<span style="color:#2c5dcd;font-weight:bold">FROM</span> table1 [, table2 ]
[<span style="color:#2c5dcd;font-weight:bold">WHERE</span> condition]
</code></pre></div><p><strong>Difference $\setminus$</strong></p>
<p>Given relations $R$ and $S$, $R \setminus S = \{T | T \in R \wedge T \notin S\}$. In SQL, this is commonly written as</p>
<div class="highlight"><pre style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#2c5dcd;font-weight:bold">SELECT</span> column1 [, column2 ]
<span style="color:#2c5dcd;font-weight:bold">FROM</span> table1 [, table2 ]
[<span style="color:#2c5dcd;font-weight:bold">WHERE</span> condition]

<span style="color:#2c5dcd;font-weight:bold">EXCEPT</span>

<span style="color:#2c5dcd;font-weight:bold">SELECT</span> column1 [, column2 ]
<span style="color:#2c5dcd;font-weight:bold">FROM</span> table1 [, table2 ]
[<span style="color:#2c5dcd;font-weight:bold">WHERE</span> condition]
</code></pre></div><p>However, a <code>LEFT JOIN</code> operator can also perform the same functionality.</p>
<p><strong>Selection $\sigma$</strong></p>
<p>Given relation $R$, $\sigma_{p}(R)$ is selecting typles that satisfy predicate $p = a \theta b$ or $p = a \theta v$ from a relation $R$. $a$ and $b$ are attribute names, $v$ is a value constant, and $\theta$ is a binary operation in $\{&lt;. \le, =, \neq, \ge, &gt;\}$. In SQL, this is simply the <code>WHERE</code> keyword. Given table <code>R</code>:</p>
<div class="highlight"><pre style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#2c5dcd;font-weight:bold">SELECT</span> <span style="color:#2c5dcd">*</span>
<span style="color:#2c5dcd;font-weight:bold">FROM</span> R
[<span style="color:#2c5dcd;font-weight:bold">WHERE</span> predicate condition]
</code></pre></div><p><strong>Projection $\prod$</strong></p>
<p>Given relation $R$, $\prod_{a_1, &hellip;, a_n}(R)$ is projecting a set obtained when the components of relation $R$ are restricted to the set $\{a_1, &hellip;, a_n\}$. In SQL, the <code>SELECT</code> operator performs this functionality. Given table <code>R</code> with attributes <code>a</code>, <code>b</code>, <code>c</code></p>
<div class="highlight"><pre style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#2c5dcd;font-weight:bold">SELECT</span> a, b, <span style="color:#2c5dcd;font-weight:bold">c</span>
<span style="color:#2c5dcd;font-weight:bold">FROM</span> R;
</code></pre></div><p><em>Fun Fact</em>: the query language from Azure Data Explorer actually has a <code>project</code> keyword that behaves exactly like this. Given table <code>R</code> with attributes <code>a</code>, <code>b</code>, <code>c</code>:</p>
<div class="highlight"><pre style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql">R
<span style="color:#2c5dcd">|</span> project a, b, <span style="color:#2c5dcd;font-weight:bold">c</span>
</code></pre></div><p><strong>Products $\times$</strong></p>
<p>Given relations $R$ and $S$, $R \times S = \{(r,s) | r \in R and s \in S\}$. In SQL, this is known as a <code>CROSS JOIN</code>:</p>
<div class="highlight"><pre style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#2c5dcd;font-weight:bold">SELECT</span> <span style="color:#2c5dcd">*</span> 
<span style="color:#2c5dcd;font-weight:bold">FROM</span> table1 
<span style="color:#2c5dcd;font-weight:bold">CROSS</span> <span style="color:#2c5dcd;font-weight:bold">JOIN</span> table2;
</code></pre></div><p><strong>Natural Join $\Join$</strong></p>
<p>Given relations $R$ and $S$, $R \Join S$ is the set of all combinations of tuples in $R$ and $S$ that are equal on their common attribute names. Formally:</p>
<p>$R \Join S = \{r \cup s | r \in R \wedge s \in S \wedge \text{Fun}(r \cup s)\}$</p>
<p>In SQL, this is known as the <code>NATURAL JOIN</code>:</p>
<div class="highlight"><pre style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#2c5dcd;font-weight:bold">SELECT</span> <span style="color:#2c5dcd">*</span> 
<span style="color:#2c5dcd;font-weight:bold">FROM</span> table1 
<span style="color:#2c5dcd;font-weight:bold">NATURAL</span> <span style="color:#2c5dcd;font-weight:bold">JOIN</span> table2;
</code></pre></div><p>**Theta Join $\Join_{c}$**</p>
<p>Given relations $R$ and $S$, $R \Join_c S$ takes the product $R \times S$, then apply $\sigma_c$ to the result.</p>
<p><strong>Renaming $\rho$</strong></p>
<p>Given relation $R$, $\rho_{R(a_1, &hellip;, a_n}(R)$ makes the resulting relation be one with attributes $a_1, &hellip;, a_n$ and the same tuples as $R$. In SQL, the <code>AS</code> operator allows for remaining of attributes:</p>
<div class="highlight"><pre style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#2c5dcd;font-weight:bold">SELECT</span> a <span style="color:#2c5dcd;font-weight:bold">AS</span> apple, b <span style="color:#2c5dcd;font-weight:bold">AS</span> banana
<span style="color:#2c5dcd;font-weight:bold">FROM</span> R
</code></pre></div>
          </div>
        </div>
      </div>
    </div>
  </section>


        </div>
        
        
    </body>
</html>